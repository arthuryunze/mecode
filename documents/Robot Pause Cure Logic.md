# 机械臂暂停调理逻辑（考虑到发生保护性停止）

Document Number: D-0002  
Document Type: Dev  
Document Author: Yunze  
Last Updated: 2022/04/13  

|Version|Date|Author|Description of Changes|
|---|---|---|---|
|0.1|2022/04/13|Yuzne|Initial Documents|

顺序应为

解除保护性停止
stop
关闭震动
自由驱动

---

1. stop(29999)			程序状态由暂停转为停止
2. 关闭震动(30002)		
3. 解除保护性停止(29999)		保护性停止弹窗去除
4. 自由驱动(30002)			机器人状态由正常转为自由驱动

> 状态不可变更

机械臂状态转换Tips：

- 机械臂`保护性停止`后，发送`解除保护性停止`时，程序处于暂停状态`pause`

- 机械臂`保护性停止`后，发送任一30002端口命令，命令不生效，保护性停止未解除，且发送命令解除保护性停止后，程序处于停止状态stop

- 机械臂处于`自由驱动模式`时，发送开启或关闭震动命令会退出自由驱动模式(所以暂停逻辑应先发关闭震动，再发自由驱动)

- 机械臂处于`自由驱动模式`时，发送pause和play不生效，只有stop可以退出自由驱动模式

- UI显示程序状态有bug，以获取programstate状态为准。

- 机械臂程序`play`状态下，发送30002端口命令，命令生效，且程序状态转为stop。

- 机械臂程序`pause`状态下，发送30002端口命令，命令不生效，且程序状态转为stop。
